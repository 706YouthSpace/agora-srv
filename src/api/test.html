<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8>
  <title>文件上传</title>
</head>
<style>
  .uploadImgBtn {
      width: 100px;
      height: 100px;
      cursor: pointer;
      position: relative;
      background: url("img/plus.png") no-repeat;
      -webkit-background-size: cover;
      background-size: cover;
  }

  .uploadImgBtn .uploadImg {
      position: absolute;
      right: 0;
      top: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
  }

  .pic {
      width: 100px;
      height: 100px;
  }

  .pic img {
      width: 100%;
      height: 100%;
  }
</style>

<script>
  //作为第几个form的标志
  // var count = 1;
  // $(document).ready(function(){
  //     $("#file1").on("change", upload );
  // });
  // function upload(){
  //     var self = this;

  //     //获得它是第几个form表单
  //     var num = this.getAttribute("id").replace(/[a-zA-Z]/g,"");
  //     //构造form的选择器
  //     var $form = "#formTag" +num;

  //     $.ajax({
  //         url:"/upload",
  //         type:"post",
  //         dataType:"json",
  //         cache:false,
  //         data: new FormData($($form)[0]),
  //         processData: false,// 不处理数据
  //         contentType: false, // 不设置内容类型
  //         success:function(data){
  //             //设置背景为我们选择的图片
  //             $(self).parent().css({
  //                 "background-image": "url("+"http://dev.access.naiver.org/download?name="+data+")"
  //             });

  //             //我们再生成一个form
  //             if(count == num ){
  //                 //count计数加1
  //                 count +=1;
  //                 var str = '<form id="formTag'+count+'" enctype="multipart/form-data">'+
  //                     '<div class="uploadImgBtn" id="uploadImgBtn">'+
  //                     '<input class="uploadImg" type="file" name="file" id="file'+count+'">'+
  //                     '</div>'+
  //                     '</form>   ';
  //                 //向最外面的盒子添加form    
  //                 $("#formBox").append($(str));
  //                 //构造input的选择器
  //                 var $sel = "#file"+count;
  //                 //为新生成的input绑定change事件
  //                 $($sel).on("change", upload );

  //             }else{
  //                 //如果不等于
  //                 return false;
  //             }
  //         }
  //     });
  // }
</script>

<body>
                <!-- saveRandomFile -->
  <form action="https://dev.access.naiver.org/api/file/upload" method="post" enctype="multipart/form-data">
    <div>
      <input type="file" name="file">
    </div>
    <div>
      <input type="submit" value="提交"/>
    </div>
    <div>
      <img id="pic1" src="" />
    </div>
    <div>
       <input type="button" id="createActivity" value="createActivity" onclick="" /> 
    </div>
  </form>

    <!-- <form id="formTag1" enctype="multipart/form-data">
        <div class="uploadImgBtn" id="uploadImgBtn">
            <input class="uploadImg" type="file" name="file" id="file1">
        </div>
    </form> -->

    <!-- <div id="formBox">
      <form id="formTag1" enctype="multipart/form-data">
          <div class="uploadImgBtn" id="uploadImgBtn">
              <input class="uploadImg" type="file" name="file" id="file1">
          </div>
      </form>
  </div> -->

</body>
</html>